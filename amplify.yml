---
version: 1

frontend:
  phases:
    build:
      commands:
        - rustc --version
        - cargo --version
        - wasm-pack --version
        - wasm-pack build --target web -s wasm-amplify-build --release wasm
        - yarn --cwd webapp
        - yarn link --cwd wasm/pkg
        - yarn link --cwd webapp @wasm-amplify-build/wasm
        - yarn --cwd webapp build

  artifacts:
    baseDirectory: webapp/dist
